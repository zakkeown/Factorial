# Task 15a: FFI Crate Skeleton

> **For Claude:** This is a lightweight scaffolding task. No TDD needed.

| Field | Value |
|-------|-------|
| **Phase** | 3 — Background task during Graph work |
| **Branch** | `feat/ffi-skeleton` |
| **Depends on** | Task 2 (IDs) — for type references in stubs |
| **Parallel with** | Task 5 (Production Graph) — background |
| **Skill** | Direct execution (small task) |

## Purpose

Create the FFI crate structure early so Task 15b can start immediately in Phase 6 without setup overhead. This is a ~5 minute scaffolding task.

## Files

- Create: `crates/factorial-ffi/Cargo.toml`
- Create: `crates/factorial-ffi/src/lib.rs` (empty stubs)
- Create: `crates/factorial-ffi/cbindgen.toml`
- Modify: workspace `Cargo.toml` — add `"crates/factorial-ffi"` to members

## Step 1: Create crate structure

`crates/factorial-ffi/Cargo.toml`:

```toml
[package]
name = "factorial-ffi"
version = "0.1.0"
edition = "2024"

[lib]
crate-type = ["cdylib"]

[dependencies]
factorial-core = { path = "../factorial-core" }

[build-dependencies]
cbindgen = "0.27"
```

`crates/factorial-ffi/cbindgen.toml`:

```toml
language = "C"
include_guard = "FACTORIAL_H"
autogen_warning = "/* Warning: this file is autogenerated by cbindgen. Do not modify. */"
no_includes = true

[enum]
rename_variants = "ScreamingSnakeCase"

[export]
prefix = "Factorial"
```

`crates/factorial-ffi/src/lib.rs`:

```rust
//! C FFI layer for the Factorial engine.
//!
//! This crate exposes a C-compatible API for creating and controlling
//! the simulation engine from non-Rust code (Godot, Unity, etc.).
//!
//! Implementation will be added in Task 15b.

// Placeholder — FFI functions will be added after core engine is complete.
```

## Step 2: Verify it compiles

```bash
cargo check -p factorial-ffi
```

## Step 3: Commit

```bash
git add -A && git commit -m "chore: scaffold FFI crate with cbindgen config"
```

## Verification

- `cargo check -p factorial-ffi` — compiles without error
- cbindgen.toml is valid
- Crate appears in workspace members
